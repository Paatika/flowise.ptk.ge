{
  "nodes": [
    {
      "id": "chatGoogleGenerativeAI_0",
      "position": {
        "x": 347.5855737704918,
        "y": 37.5534426229508
      },
      "type": "customNode",
      "data": {
        "id": "chatGoogleGenerativeAI_0",
        "label": "ChatGoogleGenerativeAI",
        "version": 3.1,
        "name": "chatGoogleGenerativeAI",
        "type": "ChatGoogleGenerativeAI",
        "baseClasses": [
          "ChatGoogleGenerativeAI",
          "LangchainChatGoogleGenerativeAI",
          "BaseChatModel",
          "BaseLanguageModel",
          "Runnable"
        ],
        "category": "Chat Models",
        "description": "Wrapper around Google Gemini large language models that use the Chat endpoint",
        "inputParams": [
          {
            "label": "Connect Credential",
            "name": "credential",
            "type": "credential",
            "credentialNames": [
              "googleGenerativeAI"
            ],
            "optional": false,
            "description": "Google Generative AI credential.",
            "id": "chatGoogleGenerativeAI_0-input-credential-credential",
            "display": true
          },
          {
            "label": "Model Name",
            "name": "modelName",
            "type": "asyncOptions",
            "loadMethod": "listModels",
            "default": "gemini-1.5-flash-latest",
            "id": "chatGoogleGenerativeAI_0-input-modelName-asyncOptions",
            "display": true
          },
          {
            "label": "Custom Model Name",
            "name": "customModelName",
            "type": "string",
            "placeholder": "gemini-1.5-pro-exp-0801",
            "description": "Custom model name to use. If provided, it will override the model selected",
            "additionalParams": true,
            "optional": true,
            "id": "chatGoogleGenerativeAI_0-input-customModelName-string",
            "display": true
          },
          {
            "label": "Temperature",
            "name": "temperature",
            "type": "number",
            "step": 0.1,
            "default": 0.9,
            "optional": true,
            "id": "chatGoogleGenerativeAI_0-input-temperature-number",
            "display": true
          },
          {
            "label": "Streaming",
            "name": "streaming",
            "type": "boolean",
            "default": true,
            "optional": true,
            "additionalParams": true,
            "id": "chatGoogleGenerativeAI_0-input-streaming-boolean",
            "display": true
          },
          {
            "label": "Max Output Tokens",
            "name": "maxOutputTokens",
            "type": "number",
            "step": 1,
            "optional": true,
            "additionalParams": true,
            "id": "chatGoogleGenerativeAI_0-input-maxOutputTokens-number",
            "display": true
          },
          {
            "label": "Top Probability",
            "name": "topP",
            "type": "number",
            "step": 0.1,
            "optional": true,
            "additionalParams": true,
            "id": "chatGoogleGenerativeAI_0-input-topP-number",
            "display": true
          },
          {
            "label": "Top Next Highest Probability Tokens",
            "name": "topK",
            "type": "number",
            "description": "Decode using top-k sampling: consider the set of top_k most probable tokens. Must be positive",
            "step": 1,
            "optional": true,
            "additionalParams": true,
            "id": "chatGoogleGenerativeAI_0-input-topK-number",
            "display": true
          },
          {
            "label": "Safety Settings",
            "name": "safetySettings",
            "type": "array",
            "description": "Safety settings for the model. Refer to the <a href=\"https://ai.google.dev/gemini-api/docs/safety-settings\">official guide</a> on how to use Safety Settings",
            "array": [
              {
                "label": "Harm Category",
                "name": "harmCategory",
                "type": "options",
                "options": [
                  {
                    "label": "Dangerous",
                    "name": "HARM_CATEGORY_DANGEROUS_CONTENT",
                    "description": "Promotes, facilitates, or encourages harmful acts."
                  },
                  {
                    "label": "Harassment",
                    "name": "HARM_CATEGORY_HARASSMENT",
                    "description": "Negative or harmful comments targeting identity and/or protected attributes."
                  },
                  {
                    "label": "Hate Speech",
                    "name": "HARM_CATEGORY_HATE_SPEECH",
                    "description": "Content that is rude, disrespectful, or profane."
                  },
                  {
                    "label": "Sexually Explicit",
                    "name": "HARM_CATEGORY_SEXUALLY_EXPLICIT",
                    "description": "Contains references to sexual acts or other lewd content."
                  },
                  {
                    "label": "Civic Integrity",
                    "name": "HARM_CATEGORY_CIVIC_INTEGRITY",
                    "description": "Election-related queries."
                  }
                ]
              },
              {
                "label": "Harm Block Threshold",
                "name": "harmBlockThreshold",
                "type": "options",
                "options": [
                  {
                    "label": "None",
                    "name": "BLOCK_NONE",
                    "description": "Always show regardless of probability of unsafe content"
                  },
                  {
                    "label": "Only High",
                    "name": "BLOCK_ONLY_HIGH",
                    "description": "Block when high probability of unsafe content"
                  },
                  {
                    "label": "Medium and Above",
                    "name": "BLOCK_MEDIUM_AND_ABOVE",
                    "description": "Block when medium or high probability of unsafe content"
                  },
                  {
                    "label": "Low and Above",
                    "name": "BLOCK_LOW_AND_ABOVE",
                    "description": "Block when low, medium or high probability of unsafe content"
                  },
                  {
                    "label": "Threshold Unspecified (Default Threshold)",
                    "name": "HARM_BLOCK_THRESHOLD_UNSPECIFIED",
                    "description": "Threshold is unspecified, block using default threshold"
                  }
                ]
              }
            ],
            "optional": true,
            "additionalParams": true,
            "id": "chatGoogleGenerativeAI_0-input-safetySettings-array",
            "display": true
          },
          {
            "label": "Thinking Budget",
            "name": "thinkingBudget",
            "type": "number",
            "description": "Guides the number of thinking tokens. -1 for dynamic, 0 to disable, or positive integer (Gemini 2.5 models).",
            "step": 1,
            "optional": true,
            "additionalParams": true,
            "show": {
              "modelName": [
                "gemini-2.5-pro",
                "gemini-2.5-flash",
                "gemini-2.5-flash-lite"
              ]
            },
            "id": "chatGoogleGenerativeAI_0-input-thinkingBudget-number",
            "display": true
          },
          {
            "label": "Base URL",
            "name": "baseUrl",
            "type": "string",
            "description": "Base URL for the API. Leave empty to use the default.",
            "optional": true,
            "additionalParams": true,
            "id": "chatGoogleGenerativeAI_0-input-baseUrl-string",
            "display": true
          },
          {
            "label": "Allow Image Uploads",
            "name": "allowImageUploads",
            "type": "boolean",
            "description": "Allow image input. Refer to the <a href=\"https://docs.flowiseai.com/using-flowise/uploads#image\" target=\"_blank\">docs</a> for more details.",
            "default": false,
            "optional": true,
            "id": "chatGoogleGenerativeAI_0-input-allowImageUploads-boolean",
            "display": true
          }
        ],
        "inputAnchors": [
          {
            "label": "Cache",
            "name": "cache",
            "type": "BaseCache",
            "optional": true,
            "id": "chatGoogleGenerativeAI_0-input-cache-BaseCache",
            "display": true
          }
        ],
        "inputs": {
          "cache": "{{inMemoryCache_0.data.instance}}",
          "modelName": "gemini-2.5-flash",
          "customModelName": "",
          "temperature": "0.1",
          "streaming": true,
          "maxOutputTokens": "",
          "topP": "",
          "topK": "",
          "safetySettings": [],
          "thinkingBudget": "",
          "baseUrl": "",
          "allowImageUploads": ""
        },
        "outputAnchors": [
          {
            "id": "chatGoogleGenerativeAI_0-output-chatGoogleGenerativeAI-ChatGoogleGenerativeAI|LangchainChatGoogleGenerativeAI|BaseChatModel|BaseLanguageModel|Runnable",
            "name": "chatGoogleGenerativeAI",
            "label": "ChatGoogleGenerativeAI",
            "description": "Wrapper around Google Gemini large language models that use the Chat endpoint",
            "type": "ChatGoogleGenerativeAI | LangchainChatGoogleGenerativeAI | BaseChatModel | BaseLanguageModel | Runnable"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 676,
      "selected": false,
      "positionAbsolute": {
        "x": 347.5855737704918,
        "y": 37.5534426229508
      },
      "dragging": false
    },
    {
      "id": "inMemoryCache_0",
      "position": {
        "x": -217.707209225234,
        "y": 276.30086844076845
      },
      "type": "customNode",
      "data": {
        "id": "inMemoryCache_0",
        "label": "InMemory Cache",
        "version": 1,
        "name": "inMemoryCache",
        "type": "InMemoryCache",
        "baseClasses": [
          "InMemoryCache",
          "BaseCache"
        ],
        "category": "Cache",
        "description": "Cache LLM response in memory, will be cleared once app restarted",
        "inputParams": [],
        "inputAnchors": [],
        "inputs": {},
        "outputAnchors": [
          {
            "id": "inMemoryCache_0-output-inMemoryCache-InMemoryCache|BaseCache",
            "name": "inMemoryCache",
            "label": "InMemoryCache",
            "description": "Cache LLM response in memory, will be cleared once app restarted",
            "type": "InMemoryCache | BaseCache"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 149,
      "selected": false,
      "positionAbsolute": {
        "x": -217.707209225234,
        "y": 276.30086844076845
      },
      "dragging": false
    },
    {
      "id": "bufferMemory_0",
      "position": {
        "x": -183.6969511882818,
        "y": 641.7115063225731
      },
      "type": "customNode",
      "data": {
        "id": "bufferMemory_0",
        "label": "Buffer Memory",
        "version": 2,
        "name": "bufferMemory",
        "type": "BufferMemory",
        "baseClasses": [
          "BufferMemory",
          "BaseChatMemory",
          "BaseMemory"
        ],
        "category": "Memory",
        "description": "Retrieve chat messages stored in database",
        "inputParams": [
          {
            "label": "Session Id",
            "name": "sessionId",
            "type": "string",
            "description": "If not specified, a random id will be used. Learn <a target=\"_blank\" href=\"https://docs.flowiseai.com/memory#ui-and-embedded-chat\">more</a>",
            "default": "",
            "additionalParams": true,
            "optional": true,
            "id": "bufferMemory_0-input-sessionId-string",
            "display": true
          },
          {
            "label": "Memory Key",
            "name": "memoryKey",
            "type": "string",
            "default": "chat_history",
            "additionalParams": true,
            "id": "bufferMemory_0-input-memoryKey-string",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "sessionId": "",
          "memoryKey": "chat_history"
        },
        "outputAnchors": [
          {
            "id": "bufferMemory_0-output-bufferMemory-BufferMemory|BaseChatMemory|BaseMemory",
            "name": "bufferMemory",
            "label": "BufferMemory",
            "description": "Retrieve chat messages stored in database",
            "type": "BufferMemory | BaseChatMemory | BaseMemory"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 259,
      "selected": false,
      "positionAbsolute": {
        "x": -183.6969511882818,
        "y": 641.7115063225731
      },
      "dragging": false
    },
    {
      "id": "googleDrive_0",
      "position": {
        "x": 209.6206042670018,
        "y": -1802.144166091394
      },
      "type": "customNode",
      "data": {
        "id": "googleDrive_0",
        "label": "Google Drive",
        "version": 1,
        "name": "googleDrive",
        "type": "Document",
        "baseClasses": [
          "Document"
        ],
        "category": "Document Loaders",
        "description": "Load documents from Google Drive files",
        "inputParams": [
          {
            "label": "Connect Credential",
            "name": "credential",
            "type": "credential",
            "description": "Google Drive OAuth2 Credential",
            "credentialNames": [
              "googleDriveOAuth2"
            ],
            "id": "googleDrive_0-input-credential-credential",
            "display": true
          },
          {
            "label": "Select Files",
            "name": "selectedFiles",
            "type": "asyncMultiOptions",
            "loadMethod": "listFiles",
            "description": "Select files from your Google Drive",
            "refresh": true,
            "optional": true,
            "id": "googleDrive_0-input-selectedFiles-asyncMultiOptions",
            "display": true
          },
          {
            "label": "Folder ID",
            "name": "folderId",
            "type": "string",
            "description": "Google Drive folder ID to load all files from (alternative to selecting specific files)",
            "placeholder": "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
            "optional": true,
            "id": "googleDrive_0-input-folderId-string",
            "display": true
          },
          {
            "label": "File Types",
            "name": "fileTypes",
            "type": "multiOptions",
            "description": "Types of files to load",
            "options": [
              {
                "label": "Google Docs",
                "name": "application/vnd.google-apps.document"
              },
              {
                "label": "Google Sheets",
                "name": "application/vnd.google-apps.spreadsheet"
              },
              {
                "label": "Google Slides",
                "name": "application/vnd.google-apps.presentation"
              },
              {
                "label": "PDF Files",
                "name": "application/pdf"
              },
              {
                "label": "Text Files",
                "name": "text/plain"
              },
              {
                "label": "Word Documents",
                "name": "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
              },
              {
                "label": "PowerPoint",
                "name": "application/vnd.openxmlformats-officedocument.presentationml.presentation"
              },
              {
                "label": "Excel Files",
                "name": "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
              }
            ],
            "default": [
              "application/vnd.google-apps.document",
              "application/vnd.google-apps.spreadsheet",
              "application/vnd.google-apps.presentation",
              "text/plain",
              "application/pdf",
              "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
              "application/vnd.openxmlformats-officedocument.presentationml.presentation",
              "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
            ],
            "optional": true,
            "id": "googleDrive_0-input-fileTypes-multiOptions",
            "display": true
          },
          {
            "label": "Include Subfolders",
            "name": "includeSubfolders",
            "type": "boolean",
            "description": "Whether to include files from subfolders when loading from a folder",
            "default": false,
            "optional": true,
            "id": "googleDrive_0-input-includeSubfolders-boolean",
            "display": true
          },
          {
            "label": "Include Shared Drives",
            "name": "includeSharedDrives",
            "type": "boolean",
            "description": "Whether to include files from shared drives (Team Drives) that you have access to",
            "default": false,
            "optional": true,
            "id": "googleDrive_0-input-includeSharedDrives-boolean",
            "display": true
          },
          {
            "label": "Max Files",
            "name": "maxFiles",
            "type": "number",
            "description": "Maximum number of files to load (default: 50)",
            "default": 50,
            "optional": true,
            "id": "googleDrive_0-input-maxFiles-number",
            "display": true
          },
          {
            "label": "Additional Metadata",
            "name": "metadata",
            "type": "json",
            "description": "Additional metadata to be added to the extracted documents",
            "optional": true,
            "additionalParams": true,
            "id": "googleDrive_0-input-metadata-json",
            "display": true
          },
          {
            "label": "Omit Metadata Keys",
            "name": "omitMetadataKeys",
            "type": "string",
            "rows": 4,
            "description": "Each document loader comes with a default set of metadata keys that are extracted from the document. You can use this field to omit some of the default metadata keys. The value should be a list of keys, seperated by comma. Use * to omit all metadata keys execept the ones you specify in the Additional Metadata field",
            "placeholder": "key1, key2, key3.nestedKey1",
            "optional": true,
            "additionalParams": true,
            "id": "googleDrive_0-input-omitMetadataKeys-string",
            "display": true
          }
        ],
        "inputAnchors": [
          {
            "label": "Text Splitter",
            "name": "textSplitter",
            "type": "TextSplitter",
            "optional": true,
            "id": "googleDrive_0-input-textSplitter-TextSplitter",
            "display": true
          }
        ],
        "inputs": {
          "selectedFiles": "[\"1hRinaocBJPKQfvpDIjB2Y_pngno4GX7XJdpVBkNKZXs\"]",
          "folderId": "",
          "fileTypes": "[\"application/vnd.google-apps.document\"]",
          "includeSubfolders": "",
          "includeSharedDrives": "",
          "maxFiles": 50,
          "textSplitter": "{{markdownTextSplitter_0.data.instance}}",
          "metadata": "",
          "omitMetadataKeys": ""
        },
        "outputAnchors": [
          {
            "name": "output",
            "label": "Output",
            "type": "options",
            "description": "Array of document objects containing metadata and pageContent",
            "options": [
              {
                "id": "googleDrive_0-output-document-Document|json",
                "name": "document",
                "label": "Document",
                "description": "Array of document objects containing metadata and pageContent",
                "type": "Document | json"
              },
              {
                "id": "googleDrive_0-output-text-string|json",
                "name": "text",
                "label": "Text",
                "description": "Concatenated string from pageContent of documents",
                "type": "string | json"
              }
            ],
            "default": "document"
          }
        ],
        "outputs": {
          "output": "document"
        },
        "selected": false
      },
      "width": 300,
      "height": 1025,
      "selected": false,
      "positionAbsolute": {
        "x": 209.6206042670018,
        "y": -1802.144166091394
      },
      "dragging": false
    },
    {
      "id": "toolAgent_0",
      "position": {
        "x": 1907.0158369285955,
        "y": -219.00354982811683
      },
      "type": "customNode",
      "data": {
        "id": "toolAgent_0",
        "label": "Tool Agent",
        "version": 2,
        "name": "toolAgent",
        "type": "AgentExecutor",
        "baseClasses": [
          "AgentExecutor",
          "BaseChain",
          "Runnable"
        ],
        "category": "Agents",
        "description": "Agent that uses Function Calling to pick the tools and args to call",
        "inputParams": [
          {
            "label": "System Message",
            "name": "systemMessage",
            "type": "string",
            "default": "You are a helpful AI assistant.",
            "description": "If Chat Prompt Template is provided, this will be ignored",
            "rows": 4,
            "optional": true,
            "additionalParams": true,
            "id": "toolAgent_0-input-systemMessage-string",
            "display": true
          },
          {
            "label": "Max Iterations",
            "name": "maxIterations",
            "type": "number",
            "optional": true,
            "additionalParams": true,
            "id": "toolAgent_0-input-maxIterations-number",
            "display": true
          },
          {
            "label": "Enable Detailed Streaming",
            "name": "enableDetailedStreaming",
            "type": "boolean",
            "default": false,
            "description": "Stream detailed intermediate steps during agent execution",
            "optional": true,
            "additionalParams": true,
            "id": "toolAgent_0-input-enableDetailedStreaming-boolean",
            "display": true
          }
        ],
        "inputAnchors": [
          {
            "label": "Tools",
            "name": "tools",
            "type": "Tool",
            "list": true,
            "id": "toolAgent_0-input-tools-Tool",
            "display": true
          },
          {
            "label": "Memory",
            "name": "memory",
            "type": "BaseChatMemory",
            "id": "toolAgent_0-input-memory-BaseChatMemory",
            "display": true
          },
          {
            "label": "Tool Calling Chat Model",
            "name": "model",
            "type": "BaseChatModel",
            "description": "Only compatible with models that are capable of function calling: ChatOpenAI, ChatMistral, ChatAnthropic, ChatGoogleGenerativeAI, ChatVertexAI, GroqChat",
            "id": "toolAgent_0-input-model-BaseChatModel",
            "display": true
          },
          {
            "label": "Chat Prompt Template",
            "name": "chatPromptTemplate",
            "type": "ChatPromptTemplate",
            "description": "Override existing prompt with Chat Prompt Template. Human Message must includes {input} variable",
            "optional": true,
            "id": "toolAgent_0-input-chatPromptTemplate-ChatPromptTemplate",
            "display": true
          },
          {
            "label": "Input Moderation",
            "description": "Detect text that could generate harmful output and prevent it from being sent to the language model",
            "name": "inputModeration",
            "type": "Moderation",
            "optional": true,
            "list": true,
            "id": "toolAgent_0-input-inputModeration-Moderation",
            "display": true
          }
        ],
        "inputs": {
          "tools": [
            "{{retrieverTool_0.data.instance}}",
            "{{customTool_0.data.instance}}",
            "{{customTool_1.data.instance}}",
            "{{customTool_2.data.instance}}",
            "{{customTool_3.data.instance}}"
          ],
          "memory": "{{bufferMemory_0.data.instance}}",
          "model": "{{chatGoogleGenerativeAI_0.data.instance}}",
          "chatPromptTemplate": "",
          "systemMessage": "You are a professional customer service representative for a language learning school \"ბექას სკოლა\". Your primary language is Georgian (ქართული).\n\n----------------------------------------------------------------\n\nIDENTITY & BEHAVIOR RULES (CRITICAL – HIGHEST PRIORITY)\n\n- You are NOT an AI, chatbot, virtual assistant, or artificial intelligence.\n- You are a human customer service representative of \"ბექას სკოლა\".\n- NEVER say or imply that you are an AI, bot, or that you do not have human abilities.\n- NEVER refuse a question by saying you are an AI.\n- If information exists in the knowledge base, always answer confidently as a school representative.\n\n----------------------------------------------------------------\n\nCORE RESPONSIBILITIES\n\n1. Answer questions about services, prices, courses, rules, and contact information using the `rag_search` tool.\n2. If the user asks about registration, respond with this exact text only:\n   სკოლაში რეგისტრაციისთვის გადადით ამ ბმულზე და შეავსეთ მარტივი ფორმა  \n   https://bekas.school/register/\n3. If the user asks how to find out their English level, respond with this exact text only:\n   თქვენ შეგიძლიათ გაიგოთ თქვენი ცოდნის დონე ონლაინ ტესტის საშუალებით. გადადით ამ ბმულზე, შეავსეთ ფორმა, გაიარეთ ტესტი  \n   https://bekas.school/test/?course=general\n4. If the user asks for a visit, respond with:\n   გთხოვთ, დაგვიტოვოთ თქვენი სახელი და ტელეფონის ნომერი. ჩვენი მენეჯერი უმოკლეს ვადაში დაგიკავშირდებათ.\n   Then politely ask for and store:\n   - Name\n   - Phone number\n   - Preferred hours to call\n\n----------------------------------------------------------------\n\nCONTACT & PHONE QUESTIONS (CRITICAL)\n\n- Any question related to phone numbers, calling, contact details, email, телефоны, телефон, номер, contact, call, email, სად დავრეკო, ტელეფონი გაქვთ\n  MUST be answered ONLY using the `rag_search` tool.\n- Always return the contact information exactly as it exists in the knowledge base.\n- NEVER say that the school does not have a phone number.\n- NEVER invent or summarize contact details.\n\n----------------------------------------------------------------\n\nLANGUAGE RULES\n\n- Respond in the language of the user's current question (Georgian, English, or Russian).\n- If the input is ambiguous or just a greeting, default to Georgian (ქართული).\n\n----------------------------------------------------------------\n\nTOOL USAGE INSTRUCTIONS\n\n- rag_search:\n  Use this tool for all questions about:\n  - prices\n  - services\n  - courses\n  - rules\n  - contact information\n  - phone numbers\n  - email\n  - visiting details\n\n----------------------------------------------------------------\n\nLINK RULES\n\nWhen generating answers, convert these phrases into links if they appear in the response text:\n\n- ონლაინ ტესტი → https://bekas.school/test/?course=general\n- სკოლაში რეგისტრაცია → https://bekas.school/register/\n",
          "inputModeration": "",
          "maxIterations": "",
          "enableDetailedStreaming": false
        },
        "outputAnchors": [
          {
            "id": "toolAgent_0-output-toolAgent-AgentExecutor|BaseChain|Runnable",
            "name": "toolAgent",
            "label": "AgentExecutor",
            "description": "Agent that uses Function Calling to pick the tools and args to call",
            "type": "AgentExecutor | BaseChain | Runnable"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 492,
      "selected": false,
      "positionAbsolute": {
        "x": 1907.0158369285955,
        "y": -219.00354982811683
      },
      "dragging": false
    },
    {
      "id": "retrieverTool_0",
      "position": {
        "x": 972.4747101042881,
        "y": -738.4313088213058
      },
      "type": "customNode",
      "data": {
        "id": "retrieverTool_0",
        "label": "Retriever Tool",
        "version": 3,
        "name": "retrieverTool",
        "type": "RetrieverTool",
        "baseClasses": [
          "RetrieverTool",
          "DynamicTool",
          "Tool",
          "StructuredTool",
          "Runnable"
        ],
        "category": "Tools",
        "description": "Use a retriever as allowed tool for agent",
        "inputParams": [
          {
            "label": "Retriever Name",
            "name": "name",
            "type": "string",
            "placeholder": "search_state_of_union",
            "id": "retrieverTool_0-input-name-string",
            "display": true
          },
          {
            "label": "Retriever Description",
            "name": "description",
            "type": "string",
            "description": "When should agent uses to retrieve documents",
            "rows": 3,
            "placeholder": "Searches and returns documents regarding the state-of-the-union.",
            "id": "retrieverTool_0-input-description-string",
            "display": true
          },
          {
            "label": "Return Source Documents",
            "name": "returnSourceDocuments",
            "type": "boolean",
            "optional": true,
            "id": "retrieverTool_0-input-returnSourceDocuments-boolean",
            "display": true
          },
          {
            "label": "Additional Metadata Filter",
            "name": "retrieverToolMetadataFilter",
            "type": "json",
            "description": "Add additional metadata filter on top of the existing filter from vector store",
            "optional": true,
            "additionalParams": true,
            "hint": {
              "label": "What can you filter?",
              "value": "Add additional filters to vector store. You can also filter with flow config, including the current \"state\":\n- `$flow.sessionId`\n- `$flow.chatId`\n- `$flow.chatflowId`\n- `$flow.input`\n- `$flow.state`\n"
            },
            "acceptVariable": true,
            "id": "retrieverTool_0-input-retrieverToolMetadataFilter-json",
            "display": true
          }
        ],
        "inputAnchors": [
          {
            "label": "Retriever",
            "name": "retriever",
            "type": "BaseRetriever",
            "id": "retrieverTool_0-input-retriever-BaseRetriever",
            "display": true
          }
        ],
        "inputs": {
          "name": "rag_search",
          "description": "Use this tool to search for information about courses, prices, working hours, address, and school rules. Input should be the user's specific question.",
          "retriever": "{{qdrant_0.data.instance}}",
          "returnSourceDocuments": false,
          "retrieverToolMetadataFilter": ""
        },
        "outputAnchors": [
          {
            "id": "retrieverTool_0-output-retrieverTool-RetrieverTool|DynamicTool|Tool|StructuredTool|Runnable",
            "name": "retrieverTool",
            "label": "RetrieverTool",
            "description": "Use a retriever as allowed tool for agent",
            "type": "RetrieverTool | DynamicTool | Tool | StructuredTool | Runnable"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 662,
      "selected": false,
      "positionAbsolute": {
        "x": 972.4747101042881,
        "y": -738.4313088213058
      },
      "dragging": false
    },
    {
      "id": "customTool_0",
      "position": {
        "x": 725.1192902442256,
        "y": 749.4174843424444
      },
      "type": "customNode",
      "data": {
        "id": "customTool_0",
        "label": "Custom Tool",
        "version": 3,
        "name": "customTool",
        "type": "CustomTool",
        "baseClasses": [
          "CustomTool",
          "Tool",
          "StructuredTool",
          "Runnable"
        ],
        "category": "Tools",
        "description": "Use custom tool you've created in Flowise within chatflow",
        "inputParams": [
          {
            "label": "Select Tool",
            "name": "selectedTool",
            "type": "asyncOptions",
            "loadMethod": "listTools",
            "id": "customTool_0-input-selectedTool-asyncOptions",
            "display": true
          },
          {
            "label": "Return Direct",
            "name": "returnDirect",
            "description": "Return the output of the tool directly to the user",
            "type": "boolean",
            "optional": true,
            "id": "customTool_0-input-returnDirect-boolean",
            "display": true
          },
          {
            "label": "Custom Tool Name",
            "name": "customToolName",
            "type": "string",
            "hidden": true,
            "id": "customTool_0-input-customToolName-string",
            "display": true
          },
          {
            "label": "Custom Tool Description",
            "name": "customToolDesc",
            "type": "string",
            "hidden": true,
            "id": "customTool_0-input-customToolDesc-string",
            "display": true
          },
          {
            "label": "Custom Tool Schema",
            "name": "customToolSchema",
            "type": "string",
            "hidden": true,
            "id": "customTool_0-input-customToolSchema-string",
            "display": true
          },
          {
            "label": "Custom Tool Func",
            "name": "customToolFunc",
            "type": "string",
            "hidden": true,
            "id": "customTool_0-input-customToolFunc-string",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "selectedTool": "aa7fbb29-0962-48ad-90c5-05f1e63b8c8f",
          "returnDirect": "",
          "customToolName": "",
          "customToolDesc": "",
          "customToolSchema": "",
          "customToolFunc": ""
        },
        "outputAnchors": [
          {
            "id": "customTool_0-output-customTool-CustomTool|Tool|StructuredTool|Runnable",
            "name": "customTool",
            "label": "CustomTool",
            "description": "Use custom tool you've created in Flowise within chatflow",
            "type": "CustomTool | Tool | StructuredTool | Runnable"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 379,
      "selected": false,
      "positionAbsolute": {
        "x": 725.1192902442256,
        "y": 749.4174843424444
      },
      "dragging": false
    },
    {
      "id": "customTool_1",
      "position": {
        "x": 1193.5305021388242,
        "y": 757.4544702797295
      },
      "type": "customNode",
      "data": {
        "id": "customTool_1",
        "label": "Custom Tool",
        "version": 3,
        "name": "customTool",
        "type": "CustomTool",
        "baseClasses": [
          "CustomTool",
          "Tool",
          "StructuredTool",
          "Runnable"
        ],
        "category": "Tools",
        "description": "Use custom tool you've created in Flowise within chatflow",
        "inputParams": [
          {
            "label": "Select Tool",
            "name": "selectedTool",
            "type": "asyncOptions",
            "loadMethod": "listTools",
            "id": "customTool_1-input-selectedTool-asyncOptions",
            "display": true
          },
          {
            "label": "Return Direct",
            "name": "returnDirect",
            "description": "Return the output of the tool directly to the user",
            "type": "boolean",
            "optional": true,
            "id": "customTool_1-input-returnDirect-boolean",
            "display": true
          },
          {
            "label": "Custom Tool Name",
            "name": "customToolName",
            "type": "string",
            "hidden": true,
            "id": "customTool_1-input-customToolName-string",
            "display": true
          },
          {
            "label": "Custom Tool Description",
            "name": "customToolDesc",
            "type": "string",
            "hidden": true,
            "id": "customTool_1-input-customToolDesc-string",
            "display": true
          },
          {
            "label": "Custom Tool Schema",
            "name": "customToolSchema",
            "type": "string",
            "hidden": true,
            "id": "customTool_1-input-customToolSchema-string",
            "display": true
          },
          {
            "label": "Custom Tool Func",
            "name": "customToolFunc",
            "type": "string",
            "hidden": true,
            "id": "customTool_1-input-customToolFunc-string",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "selectedTool": "69f8dd64-e478-49f3-a107-84448129ad51",
          "returnDirect": "",
          "customToolName": "",
          "customToolDesc": "",
          "customToolSchema": "",
          "customToolFunc": ""
        },
        "outputAnchors": [
          {
            "id": "customTool_1-output-customTool-CustomTool|Tool|StructuredTool|Runnable",
            "name": "customTool",
            "label": "CustomTool",
            "description": "Use custom tool you've created in Flowise within chatflow",
            "type": "CustomTool | Tool | StructuredTool | Runnable"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 379,
      "selected": false,
      "positionAbsolute": {
        "x": 1193.5305021388242,
        "y": 757.4544702797295
      },
      "dragging": false
    },
    {
      "id": "qdrant_0",
      "position": {
        "x": 605.08449579488,
        "y": -784.4589447341148
      },
      "type": "customNode",
      "data": {
        "id": "qdrant_0",
        "label": "Qdrant",
        "version": 5,
        "name": "qdrant",
        "type": "Qdrant",
        "baseClasses": [
          "Qdrant",
          "VectorStoreRetriever",
          "BaseRetriever"
        ],
        "category": "Vector Stores",
        "description": "Upsert embedded data and perform similarity search upon query using Qdrant, a scalable open source vector database written in Rust",
        "inputParams": [
          {
            "label": "Connect Credential",
            "name": "credential",
            "type": "credential",
            "description": "Only needed when using Qdrant cloud hosted",
            "optional": true,
            "credentialNames": [
              "qdrantApi"
            ],
            "id": "qdrant_0-input-credential-credential",
            "display": true
          },
          {
            "label": "Qdrant Server URL",
            "name": "qdrantServerUrl",
            "type": "string",
            "placeholder": "http://localhost:6333",
            "id": "qdrant_0-input-qdrantServerUrl-string",
            "display": true
          },
          {
            "label": "Qdrant Collection Name",
            "name": "qdrantCollection",
            "type": "string",
            "acceptVariable": true,
            "id": "qdrant_0-input-qdrantCollection-string",
            "display": true
          },
          {
            "label": "File Upload",
            "name": "fileUpload",
            "description": "Allow file upload on the chat",
            "hint": {
              "label": "How to use",
              "value": "\n**File Upload**\n\nThis allows file upload on the chat. Uploaded files will be upserted on the fly to the vector store.\n\n**Note:**\n- You can only turn on file upload for one vector store at a time.\n- At least one Document Loader node should be connected to the document input.\n- Document Loader should be file types like PDF, DOCX, TXT, etc.\n\n**How it works**\n- Uploaded files will have the metadata updated with the chatId.\n- This will allow the file to be associated with the chatId.\n- When querying, metadata will be filtered by chatId to retrieve files associated with the chatId.\n"
            },
            "type": "boolean",
            "additionalParams": true,
            "optional": true,
            "id": "qdrant_0-input-fileUpload-boolean",
            "display": true
          },
          {
            "label": "Vector Dimension",
            "name": "qdrantVectorDimension",
            "type": "number",
            "default": 1536,
            "additionalParams": true,
            "id": "qdrant_0-input-qdrantVectorDimension-number",
            "display": true
          },
          {
            "label": "Content Key",
            "name": "contentPayloadKey",
            "description": "The key for storing text. Default to `content`",
            "type": "string",
            "default": "content",
            "optional": true,
            "additionalParams": true,
            "id": "qdrant_0-input-contentPayloadKey-string",
            "display": true
          },
          {
            "label": "Metadata Key",
            "name": "metadataPayloadKey",
            "description": "The key for storing metadata. Default to `metadata`",
            "type": "string",
            "default": "metadata",
            "optional": true,
            "additionalParams": true,
            "id": "qdrant_0-input-metadataPayloadKey-string",
            "display": true
          },
          {
            "label": "Upsert Batch Size",
            "name": "batchSize",
            "type": "number",
            "step": 1,
            "description": "Upsert in batches of size N",
            "additionalParams": true,
            "optional": true,
            "id": "qdrant_0-input-batchSize-number",
            "display": true
          },
          {
            "label": "Similarity",
            "name": "qdrantSimilarity",
            "description": "Similarity measure used in Qdrant.",
            "type": "options",
            "default": "Cosine",
            "options": [
              {
                "label": "Cosine",
                "name": "Cosine"
              },
              {
                "label": "Euclid",
                "name": "Euclid"
              },
              {
                "label": "Dot",
                "name": "Dot"
              }
            ],
            "additionalParams": true,
            "id": "qdrant_0-input-qdrantSimilarity-options",
            "display": true
          },
          {
            "label": "Additional Collection Cofiguration",
            "name": "qdrantCollectionConfiguration",
            "description": "Refer to <a target=\"_blank\" href=\"https://qdrant.tech/documentation/concepts/collections\">collection docs</a> for more reference",
            "type": "json",
            "optional": true,
            "additionalParams": true,
            "id": "qdrant_0-input-qdrantCollectionConfiguration-json",
            "display": true
          },
          {
            "label": "Top K",
            "name": "topK",
            "description": "Number of top results to fetch. Default to 4",
            "placeholder": "4",
            "type": "number",
            "additionalParams": true,
            "optional": true,
            "id": "qdrant_0-input-topK-number",
            "display": true
          },
          {
            "label": "Qdrant Search Filter",
            "name": "qdrantFilter",
            "description": "Only return points which satisfy the conditions",
            "type": "json",
            "additionalParams": true,
            "optional": true,
            "acceptVariable": true,
            "id": "qdrant_0-input-qdrantFilter-json",
            "display": true
          }
        ],
        "inputAnchors": [
          {
            "label": "Document",
            "name": "document",
            "type": "Document",
            "list": true,
            "optional": true,
            "id": "qdrant_0-input-document-Document",
            "display": true
          },
          {
            "label": "Embeddings",
            "name": "embeddings",
            "type": "Embeddings",
            "id": "qdrant_0-input-embeddings-Embeddings",
            "display": true
          },
          {
            "label": "Record Manager",
            "name": "recordManager",
            "type": "RecordManager",
            "description": "Keep track of the record to prevent duplication",
            "optional": true,
            "id": "qdrant_0-input-recordManager-RecordManager",
            "display": true
          }
        ],
        "inputs": {
          "document": [
            "{{googleDrive_1.data.instance}}",
            "{{googleDrive_0.data.instance}}"
          ],
          "embeddings": "{{googleGenerativeAiEmbeddings_0.data.instance}}",
          "recordManager": "",
          "qdrantServerUrl": "http://qdrant:6333",
          "qdrantCollection": "beqas-school-vector-768-1",
          "fileUpload": "",
          "qdrantVectorDimension": "768",
          "contentPayloadKey": "content",
          "metadataPayloadKey": "metadata",
          "batchSize": "",
          "qdrantSimilarity": "Cosine",
          "qdrantCollectionConfiguration": "",
          "topK": "5",
          "qdrantFilter": ""
        },
        "outputAnchors": [
          {
            "name": "output",
            "label": "Output",
            "type": "options",
            "description": "",
            "options": [
              {
                "id": "qdrant_0-output-retriever-Qdrant|VectorStoreRetriever|BaseRetriever",
                "name": "retriever",
                "label": "Qdrant Retriever",
                "description": "",
                "type": "Qdrant | VectorStoreRetriever | BaseRetriever"
              },
              {
                "id": "qdrant_0-output-vectorStore-Qdrant|VectorStore",
                "name": "vectorStore",
                "label": "Qdrant Vector Store",
                "description": "",
                "type": "Qdrant | VectorStore"
              }
            ],
            "default": "retriever"
          }
        ],
        "outputs": {
          "output": "retriever"
        },
        "selected": false
      },
      "width": 300,
      "height": 712,
      "selected": false,
      "positionAbsolute": {
        "x": 605.08449579488,
        "y": -784.4589447341148
      },
      "dragging": false
    },
    {
      "id": "customTool_2",
      "position": {
        "x": 1650.5949457963675,
        "y": 762.1687607920456
      },
      "type": "customNode",
      "data": {
        "id": "customTool_2",
        "label": "Custom Tool",
        "version": 3,
        "name": "customTool",
        "type": "CustomTool",
        "baseClasses": [
          "CustomTool",
          "Tool",
          "StructuredTool",
          "Runnable"
        ],
        "category": "Tools",
        "description": "Use custom tool you've created in Flowise within chatflow",
        "inputParams": [
          {
            "label": "Select Tool",
            "name": "selectedTool",
            "type": "asyncOptions",
            "loadMethod": "listTools",
            "id": "customTool_2-input-selectedTool-asyncOptions",
            "display": true
          },
          {
            "label": "Return Direct",
            "name": "returnDirect",
            "description": "Return the output of the tool directly to the user",
            "type": "boolean",
            "optional": true,
            "id": "customTool_2-input-returnDirect-boolean",
            "display": true
          },
          {
            "label": "Custom Tool Name",
            "name": "customToolName",
            "type": "string",
            "hidden": true,
            "id": "customTool_2-input-customToolName-string",
            "display": true
          },
          {
            "label": "Custom Tool Description",
            "name": "customToolDesc",
            "type": "string",
            "hidden": true,
            "id": "customTool_2-input-customToolDesc-string",
            "display": true
          },
          {
            "label": "Custom Tool Schema",
            "name": "customToolSchema",
            "type": "string",
            "hidden": true,
            "id": "customTool_2-input-customToolSchema-string",
            "display": true
          },
          {
            "label": "Custom Tool Func",
            "name": "customToolFunc",
            "type": "string",
            "hidden": true,
            "id": "customTool_2-input-customToolFunc-string",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "selectedTool": "5d473f67-f660-4e35-a920-d8f726551bb5",
          "returnDirect": "",
          "customToolName": "",
          "customToolDesc": "",
          "customToolSchema": "",
          "customToolFunc": ""
        },
        "outputAnchors": [
          {
            "id": "customTool_2-output-customTool-CustomTool|Tool|StructuredTool|Runnable",
            "name": "customTool",
            "label": "CustomTool",
            "description": "Use custom tool you've created in Flowise within chatflow",
            "type": "CustomTool | Tool | StructuredTool | Runnable"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 379,
      "selected": false,
      "positionAbsolute": {
        "x": 1650.5949457963675,
        "y": 762.1687607920456
      },
      "dragging": false
    },
    {
      "id": "customTool_3",
      "position": {
        "x": 2041.082205940146,
        "y": 767.229694241521
      },
      "type": "customNode",
      "data": {
        "id": "customTool_3",
        "label": "Custom Tool",
        "version": 3,
        "name": "customTool",
        "type": "CustomTool",
        "baseClasses": [
          "CustomTool",
          "Tool",
          "StructuredTool",
          "Runnable"
        ],
        "category": "Tools",
        "description": "Use custom tool you've created in Flowise within chatflow",
        "inputParams": [
          {
            "label": "Select Tool",
            "name": "selectedTool",
            "type": "asyncOptions",
            "loadMethod": "listTools",
            "id": "customTool_3-input-selectedTool-asyncOptions",
            "display": true
          },
          {
            "label": "Return Direct",
            "name": "returnDirect",
            "description": "Return the output of the tool directly to the user",
            "type": "boolean",
            "optional": true,
            "id": "customTool_3-input-returnDirect-boolean",
            "display": true
          },
          {
            "label": "Custom Tool Name",
            "name": "customToolName",
            "type": "string",
            "hidden": true,
            "id": "customTool_3-input-customToolName-string",
            "display": true
          },
          {
            "label": "Custom Tool Description",
            "name": "customToolDesc",
            "type": "string",
            "hidden": true,
            "id": "customTool_3-input-customToolDesc-string",
            "display": true
          },
          {
            "label": "Custom Tool Schema",
            "name": "customToolSchema",
            "type": "string",
            "hidden": true,
            "id": "customTool_3-input-customToolSchema-string",
            "display": true
          },
          {
            "label": "Custom Tool Func",
            "name": "customToolFunc",
            "type": "string",
            "hidden": true,
            "id": "customTool_3-input-customToolFunc-string",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "selectedTool": "9f78e45c-66a3-486b-a9b3-b7f8a5c111b5",
          "returnDirect": "",
          "customToolName": "",
          "customToolDesc": "",
          "customToolSchema": "",
          "customToolFunc": ""
        },
        "outputAnchors": [
          {
            "id": "customTool_3-output-customTool-CustomTool|Tool|StructuredTool|Runnable",
            "name": "customTool",
            "label": "CustomTool",
            "description": "Use custom tool you've created in Flowise within chatflow",
            "type": "CustomTool | Tool | StructuredTool | Runnable"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 379,
      "selected": false,
      "positionAbsolute": {
        "x": 2041.082205940146,
        "y": 767.229694241521
      },
      "dragging": false
    },
    {
      "id": "googleDrive_1",
      "position": {
        "x": -207.65175952058286,
        "y": -1717.9997906703265
      },
      "type": "customNode",
      "data": {
        "id": "googleDrive_1",
        "label": "Google Drive",
        "version": 1,
        "name": "googleDrive",
        "type": "Document",
        "baseClasses": [
          "Document"
        ],
        "category": "Document Loaders",
        "description": "Load documents from Google Drive files",
        "inputParams": [
          {
            "label": "Connect Credential",
            "name": "credential",
            "type": "credential",
            "description": "Google Drive OAuth2 Credential",
            "credentialNames": [
              "googleDriveOAuth2"
            ],
            "id": "googleDrive_1-input-credential-credential",
            "display": true
          },
          {
            "label": "Select Files",
            "name": "selectedFiles",
            "type": "asyncMultiOptions",
            "loadMethod": "listFiles",
            "description": "Select files from your Google Drive",
            "refresh": true,
            "optional": true,
            "id": "googleDrive_1-input-selectedFiles-asyncMultiOptions",
            "display": true
          },
          {
            "label": "Folder ID",
            "name": "folderId",
            "type": "string",
            "description": "Google Drive folder ID to load all files from (alternative to selecting specific files)",
            "placeholder": "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
            "optional": true,
            "id": "googleDrive_1-input-folderId-string",
            "display": true
          },
          {
            "label": "File Types",
            "name": "fileTypes",
            "type": "multiOptions",
            "description": "Types of files to load",
            "options": [
              {
                "label": "Google Docs",
                "name": "application/vnd.google-apps.document"
              },
              {
                "label": "Google Sheets",
                "name": "application/vnd.google-apps.spreadsheet"
              },
              {
                "label": "Google Slides",
                "name": "application/vnd.google-apps.presentation"
              },
              {
                "label": "PDF Files",
                "name": "application/pdf"
              },
              {
                "label": "Text Files",
                "name": "text/plain"
              },
              {
                "label": "Word Documents",
                "name": "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
              },
              {
                "label": "PowerPoint",
                "name": "application/vnd.openxmlformats-officedocument.presentationml.presentation"
              },
              {
                "label": "Excel Files",
                "name": "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
              }
            ],
            "default": [
              "application/vnd.google-apps.document",
              "application/vnd.google-apps.spreadsheet",
              "application/vnd.google-apps.presentation",
              "text/plain",
              "application/pdf",
              "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
              "application/vnd.openxmlformats-officedocument.presentationml.presentation",
              "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
            ],
            "optional": true,
            "id": "googleDrive_1-input-fileTypes-multiOptions",
            "display": true
          },
          {
            "label": "Include Subfolders",
            "name": "includeSubfolders",
            "type": "boolean",
            "description": "Whether to include files from subfolders when loading from a folder",
            "default": false,
            "optional": true,
            "id": "googleDrive_1-input-includeSubfolders-boolean",
            "display": true
          },
          {
            "label": "Include Shared Drives",
            "name": "includeSharedDrives",
            "type": "boolean",
            "description": "Whether to include files from shared drives (Team Drives) that you have access to",
            "default": false,
            "optional": true,
            "id": "googleDrive_1-input-includeSharedDrives-boolean",
            "display": true
          },
          {
            "label": "Max Files",
            "name": "maxFiles",
            "type": "number",
            "description": "Maximum number of files to load (default: 50)",
            "default": 50,
            "optional": true,
            "id": "googleDrive_1-input-maxFiles-number",
            "display": true
          },
          {
            "label": "Additional Metadata",
            "name": "metadata",
            "type": "json",
            "description": "Additional metadata to be added to the extracted documents",
            "optional": true,
            "additionalParams": true,
            "id": "googleDrive_1-input-metadata-json",
            "display": true
          },
          {
            "label": "Omit Metadata Keys",
            "name": "omitMetadataKeys",
            "type": "string",
            "rows": 4,
            "description": "Each document loader comes with a default set of metadata keys that are extracted from the document. You can use this field to omit some of the default metadata keys. The value should be a list of keys, seperated by comma. Use * to omit all metadata keys execept the ones you specify in the Additional Metadata field",
            "placeholder": "key1, key2, key3.nestedKey1",
            "optional": true,
            "additionalParams": true,
            "id": "googleDrive_1-input-omitMetadataKeys-string",
            "display": true
          }
        ],
        "inputAnchors": [
          {
            "label": "Text Splitter",
            "name": "textSplitter",
            "type": "TextSplitter",
            "optional": true,
            "id": "googleDrive_1-input-textSplitter-TextSplitter",
            "display": true
          }
        ],
        "inputs": {
          "selectedFiles": "[\"1up9-gnvaw3DMZ73gG6NJ4W-C3i_ocZkCDbD48JLzIwQ\"]",
          "folderId": "",
          "fileTypes": "[\"application/vnd.google-apps.document\"]",
          "includeSubfolders": "",
          "includeSharedDrives": "",
          "maxFiles": 50,
          "textSplitter": "{{markdownTextSplitter_0.data.instance}}",
          "metadata": "",
          "omitMetadataKeys": ""
        },
        "outputAnchors": [
          {
            "name": "output",
            "label": "Output",
            "type": "options",
            "description": "Array of document objects containing metadata and pageContent",
            "options": [
              {
                "id": "googleDrive_1-output-document-Document|json",
                "name": "document",
                "label": "Document",
                "description": "Array of document objects containing metadata and pageContent",
                "type": "Document | json"
              },
              {
                "id": "googleDrive_1-output-text-string|json",
                "name": "text",
                "label": "Text",
                "description": "Concatenated string from pageContent of documents",
                "type": "string | json"
              }
            ],
            "default": "document"
          }
        ],
        "outputs": {
          "output": "document"
        },
        "selected": false
      },
      "width": 300,
      "height": 1025,
      "selected": false,
      "positionAbsolute": {
        "x": -207.65175952058286,
        "y": -1717.9997906703265
      },
      "dragging": false
    },
    {
      "id": "markdownTextSplitter_0",
      "position": {
        "x": -947.5605453384107,
        "y": -1367.9576611755683
      },
      "type": "customNode",
      "data": {
        "id": "markdownTextSplitter_0",
        "label": "Markdown Text Splitter",
        "version": 1.1,
        "name": "markdownTextSplitter",
        "type": "MarkdownTextSplitter",
        "baseClasses": [
          "MarkdownTextSplitter",
          "RecursiveCharacterTextSplitter",
          "TextSplitter",
          "BaseDocumentTransformer",
          "Runnable"
        ],
        "category": "Text Splitters",
        "description": "Split your content into documents based on the Markdown headers",
        "inputParams": [
          {
            "label": "Chunk Size",
            "name": "chunkSize",
            "type": "number",
            "description": "Number of characters in each chunk. Default is 1000.",
            "default": 1000,
            "optional": true,
            "id": "markdownTextSplitter_0-input-chunkSize-number",
            "display": true
          },
          {
            "label": "Chunk Overlap",
            "name": "chunkOverlap",
            "type": "number",
            "description": "Number of characters to overlap between chunks. Default is 200.",
            "default": 200,
            "optional": true,
            "id": "markdownTextSplitter_0-input-chunkOverlap-number",
            "display": true
          },
          {
            "label": "Split by Headers",
            "name": "splitByHeaders",
            "type": "options",
            "description": "Split documents at specified header levels. Headers will be included with their content.",
            "default": "disabled",
            "options": [
              {
                "label": "Disabled",
                "name": "disabled"
              },
              {
                "label": "# Headers (H1)",
                "name": "h1"
              },
              {
                "label": "## Headers (H2)",
                "name": "h2"
              },
              {
                "label": "### Headers (H3)",
                "name": "h3"
              },
              {
                "label": "#### Headers (H4)",
                "name": "h4"
              },
              {
                "label": "##### Headers (H5)",
                "name": "h5"
              },
              {
                "label": "###### Headers (H6)",
                "name": "h6"
              }
            ],
            "optional": true,
            "id": "markdownTextSplitter_0-input-splitByHeaders-options",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "chunkSize": 1000,
          "chunkOverlap": 200,
          "splitByHeaders": "h2"
        },
        "outputAnchors": [
          {
            "id": "markdownTextSplitter_0-output-markdownTextSplitter-MarkdownTextSplitter|RecursiveCharacterTextSplitter|TextSplitter|BaseDocumentTransformer|Runnable",
            "name": "markdownTextSplitter",
            "label": "MarkdownTextSplitter",
            "description": "Split your content into documents based on the Markdown headers",
            "type": "MarkdownTextSplitter | RecursiveCharacterTextSplitter | TextSplitter | BaseDocumentTransformer | Runnable"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 479,
      "selected": false,
      "positionAbsolute": {
        "x": -947.5605453384107,
        "y": -1367.9576611755683
      },
      "dragging": false
    },
    {
      "id": "googleGenerativeAiEmbeddings_0",
      "position": {
        "x": -55.022053662783605,
        "y": -551.9535871100927
      },
      "type": "customNode",
      "data": {
        "id": "googleGenerativeAiEmbeddings_0",
        "label": "GoogleGenerativeAI Embeddings",
        "version": 2,
        "name": "googleGenerativeAiEmbeddings",
        "type": "GoogleGenerativeAiEmbeddings",
        "baseClasses": [
          "GoogleGenerativeAiEmbeddings",
          "GoogleGenerativeAIEmbeddings",
          "Embeddings"
        ],
        "category": "Embeddings",
        "description": "Google Generative API to generate embeddings for a given text",
        "inputParams": [
          {
            "label": "Connect Credential",
            "name": "credential",
            "type": "credential",
            "credentialNames": [
              "googleGenerativeAI"
            ],
            "optional": false,
            "description": "Google Generative AI credential.",
            "id": "googleGenerativeAiEmbeddings_0-input-credential-credential",
            "display": true
          },
          {
            "label": "Model Name",
            "name": "modelName",
            "type": "asyncOptions",
            "loadMethod": "listModels",
            "default": "embedding-001",
            "id": "googleGenerativeAiEmbeddings_0-input-modelName-asyncOptions",
            "display": true
          },
          {
            "label": "Task Type",
            "name": "tasktype",
            "type": "options",
            "description": "Type of task for which the embedding will be used",
            "options": [
              {
                "label": "TASK_TYPE_UNSPECIFIED",
                "name": "TASK_TYPE_UNSPECIFIED"
              },
              {
                "label": "RETRIEVAL_QUERY",
                "name": "RETRIEVAL_QUERY"
              },
              {
                "label": "RETRIEVAL_DOCUMENT",
                "name": "RETRIEVAL_DOCUMENT"
              },
              {
                "label": "SEMANTIC_SIMILARITY",
                "name": "SEMANTIC_SIMILARITY"
              },
              {
                "label": "CLASSIFICATION",
                "name": "CLASSIFICATION"
              },
              {
                "label": "CLUSTERING",
                "name": "CLUSTERING"
              }
            ],
            "default": "TASK_TYPE_UNSPECIFIED",
            "id": "googleGenerativeAiEmbeddings_0-input-tasktype-options",
            "display": true
          },
          {
            "label": "Strip New Lines",
            "name": "stripNewLines",
            "type": "boolean",
            "optional": true,
            "additionalParams": true,
            "description": "Remove new lines from input text before embedding to reduce token count",
            "id": "googleGenerativeAiEmbeddings_0-input-stripNewLines-boolean",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "modelName": "embedding-001",
          "tasktype": "RETRIEVAL_DOCUMENT",
          "stripNewLines": ""
        },
        "outputAnchors": [
          {
            "id": "googleGenerativeAiEmbeddings_0-output-googleGenerativeAiEmbeddings-GoogleGenerativeAiEmbeddings|GoogleGenerativeAIEmbeddings|Embeddings",
            "name": "googleGenerativeAiEmbeddings",
            "label": "GoogleGenerativeAiEmbeddings",
            "description": "Google Generative API to generate embeddings for a given text",
            "type": "GoogleGenerativeAiEmbeddings | GoogleGenerativeAIEmbeddings | Embeddings"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 526,
      "selected": false,
      "dragging": false,
      "positionAbsolute": {
        "x": -55.022053662783605,
        "y": -551.9535871100927
      }
    }
  ],
  "edges": [
    {
      "source": "inMemoryCache_0",
      "sourceHandle": "inMemoryCache_0-output-inMemoryCache-InMemoryCache|BaseCache",
      "target": "chatGoogleGenerativeAI_0",
      "targetHandle": "chatGoogleGenerativeAI_0-input-cache-BaseCache",
      "type": "buttonedge",
      "id": "inMemoryCache_0-inMemoryCache_0-output-inMemoryCache-InMemoryCache|BaseCache-chatGoogleGenerativeAI_0-chatGoogleGenerativeAI_0-input-cache-BaseCache"
    },
    {
      "source": "chatGoogleGenerativeAI_0",
      "sourceHandle": "chatGoogleGenerativeAI_0-output-chatGoogleGenerativeAI-ChatGoogleGenerativeAI|LangchainChatGoogleGenerativeAI|BaseChatModel|BaseLanguageModel|Runnable",
      "target": "toolAgent_0",
      "targetHandle": "toolAgent_0-input-model-BaseChatModel",
      "type": "buttonedge",
      "id": "chatGoogleGenerativeAI_0-chatGoogleGenerativeAI_0-output-chatGoogleGenerativeAI-ChatGoogleGenerativeAI|LangchainChatGoogleGenerativeAI|BaseChatModel|BaseLanguageModel|Runnable-toolAgent_0-toolAgent_0-input-model-BaseChatModel"
    },
    {
      "source": "bufferMemory_0",
      "sourceHandle": "bufferMemory_0-output-bufferMemory-BufferMemory|BaseChatMemory|BaseMemory",
      "target": "toolAgent_0",
      "targetHandle": "toolAgent_0-input-memory-BaseChatMemory",
      "type": "buttonedge",
      "id": "bufferMemory_0-bufferMemory_0-output-bufferMemory-BufferMemory|BaseChatMemory|BaseMemory-toolAgent_0-toolAgent_0-input-memory-BaseChatMemory"
    },
    {
      "source": "retrieverTool_0",
      "sourceHandle": "retrieverTool_0-output-retrieverTool-RetrieverTool|DynamicTool|Tool|StructuredTool|Runnable",
      "target": "toolAgent_0",
      "targetHandle": "toolAgent_0-input-tools-Tool",
      "type": "buttonedge",
      "id": "retrieverTool_0-retrieverTool_0-output-retrieverTool-RetrieverTool|DynamicTool|Tool|StructuredTool|Runnable-toolAgent_0-toolAgent_0-input-tools-Tool"
    },
    {
      "source": "customTool_0",
      "sourceHandle": "customTool_0-output-customTool-CustomTool|Tool|StructuredTool|Runnable",
      "target": "toolAgent_0",
      "targetHandle": "toolAgent_0-input-tools-Tool",
      "type": "buttonedge",
      "id": "customTool_0-customTool_0-output-customTool-CustomTool|Tool|StructuredTool|Runnable-toolAgent_0-toolAgent_0-input-tools-Tool"
    },
    {
      "source": "customTool_1",
      "sourceHandle": "customTool_1-output-customTool-CustomTool|Tool|StructuredTool|Runnable",
      "target": "toolAgent_0",
      "targetHandle": "toolAgent_0-input-tools-Tool",
      "type": "buttonedge",
      "id": "customTool_1-customTool_1-output-customTool-CustomTool|Tool|StructuredTool|Runnable-toolAgent_0-toolAgent_0-input-tools-Tool"
    },
    {
      "source": "qdrant_0",
      "sourceHandle": "qdrant_0-output-retriever-Qdrant|VectorStoreRetriever|BaseRetriever",
      "target": "retrieverTool_0",
      "targetHandle": "retrieverTool_0-input-retriever-BaseRetriever",
      "type": "buttonedge",
      "id": "qdrant_0-qdrant_0-output-retriever-Qdrant|VectorStoreRetriever|BaseRetriever-retrieverTool_0-retrieverTool_0-input-retriever-BaseRetriever"
    },
    {
      "source": "customTool_2",
      "sourceHandle": "customTool_2-output-customTool-CustomTool|Tool|StructuredTool|Runnable",
      "target": "toolAgent_0",
      "targetHandle": "toolAgent_0-input-tools-Tool",
      "type": "buttonedge",
      "id": "customTool_2-customTool_2-output-customTool-CustomTool|Tool|StructuredTool|Runnable-toolAgent_0-toolAgent_0-input-tools-Tool"
    },
    {
      "source": "customTool_3",
      "sourceHandle": "customTool_3-output-customTool-CustomTool|Tool|StructuredTool|Runnable",
      "target": "toolAgent_0",
      "targetHandle": "toolAgent_0-input-tools-Tool",
      "type": "buttonedge",
      "id": "customTool_3-customTool_3-output-customTool-CustomTool|Tool|StructuredTool|Runnable-toolAgent_0-toolAgent_0-input-tools-Tool"
    },
    {
      "source": "markdownTextSplitter_0",
      "sourceHandle": "markdownTextSplitter_0-output-markdownTextSplitter-MarkdownTextSplitter|RecursiveCharacterTextSplitter|TextSplitter|BaseDocumentTransformer|Runnable",
      "target": "googleDrive_1",
      "targetHandle": "googleDrive_1-input-textSplitter-TextSplitter",
      "type": "buttonedge",
      "id": "markdownTextSplitter_0-markdownTextSplitter_0-output-markdownTextSplitter-MarkdownTextSplitter|RecursiveCharacterTextSplitter|TextSplitter|BaseDocumentTransformer|Runnable-googleDrive_1-googleDrive_1-input-textSplitter-TextSplitter"
    },
    {
      "source": "googleDrive_1",
      "sourceHandle": "googleDrive_1-output-document-Document|json",
      "target": "qdrant_0",
      "targetHandle": "qdrant_0-input-document-Document",
      "type": "buttonedge",
      "id": "googleDrive_1-googleDrive_1-output-document-Document|json-qdrant_0-qdrant_0-input-document-Document"
    },
    {
      "source": "markdownTextSplitter_0",
      "sourceHandle": "markdownTextSplitter_0-output-markdownTextSplitter-MarkdownTextSplitter|RecursiveCharacterTextSplitter|TextSplitter|BaseDocumentTransformer|Runnable",
      "target": "googleDrive_0",
      "targetHandle": "googleDrive_0-input-textSplitter-TextSplitter",
      "type": "buttonedge",
      "id": "markdownTextSplitter_0-markdownTextSplitter_0-output-markdownTextSplitter-MarkdownTextSplitter|RecursiveCharacterTextSplitter|TextSplitter|BaseDocumentTransformer|Runnable-googleDrive_0-googleDrive_0-input-textSplitter-TextSplitter"
    },
    {
      "source": "googleDrive_0",
      "sourceHandle": "googleDrive_0-output-document-Document|json",
      "target": "qdrant_0",
      "targetHandle": "qdrant_0-input-document-Document",
      "type": "buttonedge",
      "id": "googleDrive_0-googleDrive_0-output-document-Document|json-qdrant_0-qdrant_0-input-document-Document"
    },
    {
      "source": "googleGenerativeAiEmbeddings_0",
      "sourceHandle": "googleGenerativeAiEmbeddings_0-output-googleGenerativeAiEmbeddings-GoogleGenerativeAiEmbeddings|GoogleGenerativeAIEmbeddings|Embeddings",
      "target": "qdrant_0",
      "targetHandle": "qdrant_0-input-embeddings-Embeddings",
      "type": "buttonedge",
      "id": "googleGenerativeAiEmbeddings_0-googleGenerativeAiEmbeddings_0-output-googleGenerativeAiEmbeddings-GoogleGenerativeAiEmbeddings|GoogleGenerativeAIEmbeddings|Embeddings-qdrant_0-qdrant_0-input-embeddings-Embeddings"
    }
  ]
}