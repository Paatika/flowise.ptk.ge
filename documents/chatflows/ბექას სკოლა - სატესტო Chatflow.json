{
  "nodes": [
    {
      "id": "googleDrive_0",
      "position": {
        "x": -59.40232558139543,
        "y": 91.5007751937984
      },
      "type": "customNode",
      "data": {
        "id": "googleDrive_0",
        "label": "Google Drive",
        "version": 1,
        "name": "googleDrive",
        "type": "Document",
        "baseClasses": [
          "Document"
        ],
        "category": "Document Loaders",
        "description": "Load documents from Google Drive files",
        "inputParams": [
          {
            "label": "Connect Credential",
            "name": "credential",
            "type": "credential",
            "description": "Google Drive OAuth2 Credential",
            "credentialNames": [
              "googleDriveOAuth2"
            ],
            "id": "googleDrive_0-input-credential-credential",
            "display": true
          },
          {
            "label": "Select Files",
            "name": "selectedFiles",
            "type": "asyncMultiOptions",
            "loadMethod": "listFiles",
            "description": "Select files from your Google Drive",
            "refresh": true,
            "optional": true,
            "id": "googleDrive_0-input-selectedFiles-asyncMultiOptions",
            "display": true
          },
          {
            "label": "Folder ID",
            "name": "folderId",
            "type": "string",
            "description": "Google Drive folder ID to load all files from (alternative to selecting specific files)",
            "placeholder": "1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",
            "optional": true,
            "id": "googleDrive_0-input-folderId-string",
            "display": true
          },
          {
            "label": "File Types",
            "name": "fileTypes",
            "type": "multiOptions",
            "description": "Types of files to load",
            "options": [
              {
                "label": "Google Docs",
                "name": "application/vnd.google-apps.document"
              },
              {
                "label": "Google Sheets",
                "name": "application/vnd.google-apps.spreadsheet"
              },
              {
                "label": "Google Slides",
                "name": "application/vnd.google-apps.presentation"
              },
              {
                "label": "PDF Files",
                "name": "application/pdf"
              },
              {
                "label": "Text Files",
                "name": "text/plain"
              },
              {
                "label": "Word Documents",
                "name": "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
              },
              {
                "label": "PowerPoint",
                "name": "application/vnd.openxmlformats-officedocument.presentationml.presentation"
              },
              {
                "label": "Excel Files",
                "name": "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
              }
            ],
            "default": [
              "application/vnd.google-apps.document",
              "application/vnd.google-apps.spreadsheet",
              "application/vnd.google-apps.presentation",
              "text/plain",
              "application/pdf",
              "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
              "application/vnd.openxmlformats-officedocument.presentationml.presentation",
              "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
            ],
            "optional": true,
            "id": "googleDrive_0-input-fileTypes-multiOptions",
            "display": true
          },
          {
            "label": "Include Subfolders",
            "name": "includeSubfolders",
            "type": "boolean",
            "description": "Whether to include files from subfolders when loading from a folder",
            "default": false,
            "optional": true,
            "id": "googleDrive_0-input-includeSubfolders-boolean",
            "display": true
          },
          {
            "label": "Include Shared Drives",
            "name": "includeSharedDrives",
            "type": "boolean",
            "description": "Whether to include files from shared drives (Team Drives) that you have access to",
            "default": false,
            "optional": true,
            "id": "googleDrive_0-input-includeSharedDrives-boolean",
            "display": true
          },
          {
            "label": "Max Files",
            "name": "maxFiles",
            "type": "number",
            "description": "Maximum number of files to load (default: 50)",
            "default": 50,
            "optional": true,
            "id": "googleDrive_0-input-maxFiles-number",
            "display": true
          },
          {
            "label": "Additional Metadata",
            "name": "metadata",
            "type": "json",
            "description": "Additional metadata to be added to the extracted documents",
            "optional": true,
            "additionalParams": true,
            "id": "googleDrive_0-input-metadata-json",
            "display": true
          },
          {
            "label": "Omit Metadata Keys",
            "name": "omitMetadataKeys",
            "type": "string",
            "rows": 4,
            "description": "Each document loader comes with a default set of metadata keys that are extracted from the document. You can use this field to omit some of the default metadata keys. The value should be a list of keys, seperated by comma. Use * to omit all metadata keys execept the ones you specify in the Additional Metadata field",
            "placeholder": "key1, key2, key3.nestedKey1",
            "optional": true,
            "additionalParams": true,
            "id": "googleDrive_0-input-omitMetadataKeys-string",
            "display": true
          }
        ],
        "inputAnchors": [
          {
            "label": "Text Splitter",
            "name": "textSplitter",
            "type": "TextSplitter",
            "optional": true,
            "id": "googleDrive_0-input-textSplitter-TextSplitter",
            "display": true
          }
        ],
        "inputs": {
          "selectedFiles": "[\"1up9-gnvaw3DMZ73gG6NJ4W-C3i_ocZkCDbD48JLzIwQ\"]",
          "folderId": "",
          "fileTypes": [
            "application/vnd.google-apps.document",
            "application/vnd.google-apps.spreadsheet",
            "application/vnd.google-apps.presentation",
            "text/plain",
            "application/pdf",
            "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
            "application/vnd.openxmlformats-officedocument.presentationml.presentation",
            "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
          ],
          "includeSubfolders": "",
          "includeSharedDrives": "",
          "maxFiles": 50,
          "textSplitter": "{{markdownTextSplitter_0.data.instance}}",
          "metadata": "",
          "omitMetadataKeys": ""
        },
        "outputAnchors": [
          {
            "name": "output",
            "label": "Output",
            "type": "options",
            "description": "Array of document objects containing metadata and pageContent",
            "options": [
              {
                "id": "googleDrive_0-output-document-Document|json",
                "name": "document",
                "label": "Document",
                "description": "Array of document objects containing metadata and pageContent",
                "type": "Document | json"
              },
              {
                "id": "googleDrive_0-output-text-string|json",
                "name": "text",
                "label": "Text",
                "description": "Concatenated string from pageContent of documents",
                "type": "string | json"
              }
            ],
            "default": "document"
          }
        ],
        "outputs": {
          "output": "document"
        },
        "selected": false
      },
      "width": 300,
      "height": 1193,
      "selected": false,
      "positionAbsolute": {
        "x": -59.40232558139543,
        "y": 91.5007751937984
      },
      "dragging": false
    },
    {
      "id": "qdrant_0",
      "position": {
        "x": 436.93846826493433,
        "y": 1008.7333925075314
      },
      "type": "customNode",
      "data": {
        "id": "qdrant_0",
        "label": "Qdrant",
        "version": 5,
        "name": "qdrant",
        "type": "Qdrant",
        "baseClasses": [
          "Qdrant",
          "VectorStoreRetriever",
          "BaseRetriever"
        ],
        "category": "Vector Stores",
        "description": "Upsert embedded data and perform similarity search upon query using Qdrant, a scalable open source vector database written in Rust",
        "inputParams": [
          {
            "label": "Connect Credential",
            "name": "credential",
            "type": "credential",
            "description": "Only needed when using Qdrant cloud hosted",
            "optional": true,
            "credentialNames": [
              "qdrantApi"
            ],
            "id": "qdrant_0-input-credential-credential",
            "display": true
          },
          {
            "label": "Qdrant Server URL",
            "name": "qdrantServerUrl",
            "type": "string",
            "placeholder": "http://localhost:6333",
            "id": "qdrant_0-input-qdrantServerUrl-string",
            "display": true
          },
          {
            "label": "Qdrant Collection Name",
            "name": "qdrantCollection",
            "type": "string",
            "acceptVariable": true,
            "id": "qdrant_0-input-qdrantCollection-string",
            "display": true
          },
          {
            "label": "File Upload",
            "name": "fileUpload",
            "description": "Allow file upload on the chat",
            "hint": {
              "label": "How to use",
              "value": "\n**File Upload**\n\nThis allows file upload on the chat. Uploaded files will be upserted on the fly to the vector store.\n\n**Note:**\n- You can only turn on file upload for one vector store at a time.\n- At least one Document Loader node should be connected to the document input.\n- Document Loader should be file types like PDF, DOCX, TXT, etc.\n\n**How it works**\n- Uploaded files will have the metadata updated with the chatId.\n- This will allow the file to be associated with the chatId.\n- When querying, metadata will be filtered by chatId to retrieve files associated with the chatId.\n"
            },
            "type": "boolean",
            "additionalParams": true,
            "optional": true,
            "id": "qdrant_0-input-fileUpload-boolean",
            "display": true
          },
          {
            "label": "Vector Dimension",
            "name": "qdrantVectorDimension",
            "type": "number",
            "default": 1536,
            "additionalParams": true,
            "id": "qdrant_0-input-qdrantVectorDimension-number",
            "display": true
          },
          {
            "label": "Content Key",
            "name": "contentPayloadKey",
            "description": "The key for storing text. Default to `content`",
            "type": "string",
            "default": "content",
            "optional": true,
            "additionalParams": true,
            "id": "qdrant_0-input-contentPayloadKey-string",
            "display": true
          },
          {
            "label": "Metadata Key",
            "name": "metadataPayloadKey",
            "description": "The key for storing metadata. Default to `metadata`",
            "type": "string",
            "default": "metadata",
            "optional": true,
            "additionalParams": true,
            "id": "qdrant_0-input-metadataPayloadKey-string",
            "display": true
          },
          {
            "label": "Upsert Batch Size",
            "name": "batchSize",
            "type": "number",
            "step": 1,
            "description": "Upsert in batches of size N",
            "additionalParams": true,
            "optional": true,
            "id": "qdrant_0-input-batchSize-number",
            "display": true
          },
          {
            "label": "Similarity",
            "name": "qdrantSimilarity",
            "description": "Similarity measure used in Qdrant.",
            "type": "options",
            "default": "Cosine",
            "options": [
              {
                "label": "Cosine",
                "name": "Cosine"
              },
              {
                "label": "Euclid",
                "name": "Euclid"
              },
              {
                "label": "Dot",
                "name": "Dot"
              }
            ],
            "additionalParams": true,
            "id": "qdrant_0-input-qdrantSimilarity-options",
            "display": true
          },
          {
            "label": "Additional Collection Cofiguration",
            "name": "qdrantCollectionConfiguration",
            "description": "Refer to <a target=\"_blank\" href=\"https://qdrant.tech/documentation/concepts/collections\">collection docs</a> for more reference",
            "type": "json",
            "optional": true,
            "additionalParams": true,
            "id": "qdrant_0-input-qdrantCollectionConfiguration-json",
            "display": true
          },
          {
            "label": "Top K",
            "name": "topK",
            "description": "Number of top results to fetch. Default to 4",
            "placeholder": "4",
            "type": "number",
            "additionalParams": true,
            "optional": true,
            "id": "qdrant_0-input-topK-number",
            "display": true
          },
          {
            "label": "Qdrant Search Filter",
            "name": "qdrantFilter",
            "description": "Only return points which satisfy the conditions",
            "type": "json",
            "additionalParams": true,
            "optional": true,
            "acceptVariable": true,
            "id": "qdrant_0-input-qdrantFilter-json",
            "display": true
          }
        ],
        "inputAnchors": [
          {
            "label": "Document",
            "name": "document",
            "type": "Document",
            "list": true,
            "optional": true,
            "id": "qdrant_0-input-document-Document",
            "display": true
          },
          {
            "label": "Embeddings",
            "name": "embeddings",
            "type": "Embeddings",
            "id": "qdrant_0-input-embeddings-Embeddings",
            "display": true
          },
          {
            "label": "Record Manager",
            "name": "recordManager",
            "type": "RecordManager",
            "description": "Keep track of the record to prevent duplication",
            "optional": true,
            "id": "qdrant_0-input-recordManager-RecordManager",
            "display": true
          }
        ],
        "inputs": {
          "document": [
            "{{googleDrive_0.data.instance}}"
          ],
          "embeddings": "{{googleGenerativeAiEmbeddings_0.data.instance}}",
          "recordManager": "",
          "qdrantServerUrl": "http://qdrant:6333",
          "qdrantCollection": "6-vertex-768-beqas-satesto-droebiti",
          "fileUpload": "",
          "qdrantVectorDimension": "768",
          "contentPayloadKey": "content",
          "metadataPayloadKey": "metadata",
          "batchSize": "",
          "qdrantSimilarity": "Cosine",
          "qdrantCollectionConfiguration": "",
          "topK": "",
          "qdrantFilter": ""
        },
        "outputAnchors": [
          {
            "name": "output",
            "label": "Output",
            "type": "options",
            "description": "",
            "options": [
              {
                "id": "qdrant_0-output-retriever-Qdrant|VectorStoreRetriever|BaseRetriever",
                "name": "retriever",
                "label": "Qdrant Retriever",
                "description": "",
                "type": "Qdrant | VectorStoreRetriever | BaseRetriever"
              },
              {
                "id": "qdrant_0-output-vectorStore-Qdrant|VectorStore",
                "name": "vectorStore",
                "label": "Qdrant Vector Store",
                "description": "",
                "type": "Qdrant | VectorStore"
              }
            ],
            "default": "retriever"
          }
        ],
        "outputs": {
          "output": "retriever"
        },
        "selected": false
      },
      "width": 300,
      "height": 712,
      "selected": false,
      "positionAbsolute": {
        "x": 436.93846826493433,
        "y": 1008.7333925075314
      },
      "dragging": false
    },
    {
      "id": "markdownTextSplitter_0",
      "position": {
        "x": -731.9465116279071,
        "y": 775.1300000000001
      },
      "type": "customNode",
      "data": {
        "id": "markdownTextSplitter_0",
        "label": "Markdown Text Splitter",
        "version": 1.1,
        "name": "markdownTextSplitter",
        "type": "MarkdownTextSplitter",
        "baseClasses": [
          "MarkdownTextSplitter",
          "RecursiveCharacterTextSplitter",
          "TextSplitter",
          "BaseDocumentTransformer",
          "Runnable"
        ],
        "category": "Text Splitters",
        "description": "Split your content into documents based on the Markdown headers",
        "inputParams": [
          {
            "label": "Chunk Size",
            "name": "chunkSize",
            "type": "number",
            "description": "Number of characters in each chunk. Default is 1000.",
            "default": 1000,
            "optional": true,
            "id": "markdownTextSplitter_0-input-chunkSize-number",
            "display": true
          },
          {
            "label": "Chunk Overlap",
            "name": "chunkOverlap",
            "type": "number",
            "description": "Number of characters to overlap between chunks. Default is 200.",
            "default": 200,
            "optional": true,
            "id": "markdownTextSplitter_0-input-chunkOverlap-number",
            "display": true
          },
          {
            "label": "Split by Headers",
            "name": "splitByHeaders",
            "type": "options",
            "description": "Split documents at specified header levels. Headers will be included with their content.",
            "default": "disabled",
            "options": [
              {
                "label": "Disabled",
                "name": "disabled"
              },
              {
                "label": "# Headers (H1)",
                "name": "h1"
              },
              {
                "label": "## Headers (H2)",
                "name": "h2"
              },
              {
                "label": "### Headers (H3)",
                "name": "h3"
              },
              {
                "label": "#### Headers (H4)",
                "name": "h4"
              },
              {
                "label": "##### Headers (H5)",
                "name": "h5"
              },
              {
                "label": "###### Headers (H6)",
                "name": "h6"
              }
            ],
            "optional": true,
            "id": "markdownTextSplitter_0-input-splitByHeaders-options",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "chunkSize": "500",
          "chunkOverlap": "150",
          "splitByHeaders": "h2"
        },
        "outputAnchors": [
          {
            "id": "markdownTextSplitter_0-output-markdownTextSplitter-MarkdownTextSplitter|RecursiveCharacterTextSplitter|TextSplitter|BaseDocumentTransformer|Runnable",
            "name": "markdownTextSplitter",
            "label": "MarkdownTextSplitter",
            "description": "Split your content into documents based on the Markdown headers",
            "type": "MarkdownTextSplitter | RecursiveCharacterTextSplitter | TextSplitter | BaseDocumentTransformer | Runnable"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 479,
      "selected": false,
      "positionAbsolute": {
        "x": -731.9465116279071,
        "y": 775.1300000000001
      },
      "dragging": false
    },
    {
      "id": "googleGenerativeAiEmbeddings_0",
      "position": {
        "x": -188.75757483541372,
        "y": 1404.4683803746802
      },
      "type": "customNode",
      "data": {
        "id": "googleGenerativeAiEmbeddings_0",
        "label": "GoogleGenerativeAI Embeddings",
        "version": 2,
        "name": "googleGenerativeAiEmbeddings",
        "type": "GoogleGenerativeAiEmbeddings",
        "baseClasses": [
          "GoogleGenerativeAiEmbeddings",
          "GoogleGenerativeAIEmbeddings",
          "Embeddings"
        ],
        "category": "Embeddings",
        "description": "Google Generative API to generate embeddings for a given text",
        "inputParams": [
          {
            "label": "Connect Credential",
            "name": "credential",
            "type": "credential",
            "credentialNames": [
              "googleGenerativeAI"
            ],
            "optional": false,
            "description": "Google Generative AI credential.",
            "id": "googleGenerativeAiEmbeddings_0-input-credential-credential",
            "display": true
          },
          {
            "label": "Model Name",
            "name": "modelName",
            "type": "asyncOptions",
            "loadMethod": "listModels",
            "default": "embedding-001",
            "id": "googleGenerativeAiEmbeddings_0-input-modelName-asyncOptions",
            "display": true
          },
          {
            "label": "Task Type",
            "name": "tasktype",
            "type": "options",
            "description": "Type of task for which the embedding will be used",
            "options": [
              {
                "label": "TASK_TYPE_UNSPECIFIED",
                "name": "TASK_TYPE_UNSPECIFIED"
              },
              {
                "label": "RETRIEVAL_QUERY",
                "name": "RETRIEVAL_QUERY"
              },
              {
                "label": "RETRIEVAL_DOCUMENT",
                "name": "RETRIEVAL_DOCUMENT"
              },
              {
                "label": "SEMANTIC_SIMILARITY",
                "name": "SEMANTIC_SIMILARITY"
              },
              {
                "label": "CLASSIFICATION",
                "name": "CLASSIFICATION"
              },
              {
                "label": "CLUSTERING",
                "name": "CLUSTERING"
              }
            ],
            "default": "TASK_TYPE_UNSPECIFIED",
            "id": "googleGenerativeAiEmbeddings_0-input-tasktype-options",
            "display": true
          },
          {
            "label": "Strip New Lines",
            "name": "stripNewLines",
            "type": "boolean",
            "optional": true,
            "additionalParams": true,
            "description": "Remove new lines from input text before embedding to reduce token count",
            "id": "googleGenerativeAiEmbeddings_0-input-stripNewLines-boolean",
            "display": true
          }
        ],
        "inputAnchors": [],
        "inputs": {
          "modelName": "embedding-001",
          "tasktype": "RETRIEVAL_DOCUMENT",
          "stripNewLines": ""
        },
        "outputAnchors": [
          {
            "id": "googleGenerativeAiEmbeddings_0-output-googleGenerativeAiEmbeddings-GoogleGenerativeAiEmbeddings|GoogleGenerativeAIEmbeddings|Embeddings",
            "name": "googleGenerativeAiEmbeddings",
            "label": "GoogleGenerativeAiEmbeddings",
            "description": "Google Generative API to generate embeddings for a given text",
            "type": "GoogleGenerativeAiEmbeddings | GoogleGenerativeAIEmbeddings | Embeddings"
          }
        ],
        "outputs": {},
        "selected": false
      },
      "width": 300,
      "height": 526,
      "selected": false,
      "positionAbsolute": {
        "x": -188.75757483541372,
        "y": 1404.4683803746802
      },
      "dragging": false
    }
  ],
  "edges": [
    {
      "source": "markdownTextSplitter_0",
      "sourceHandle": "markdownTextSplitter_0-output-markdownTextSplitter-MarkdownTextSplitter|RecursiveCharacterTextSplitter|TextSplitter|BaseDocumentTransformer|Runnable",
      "target": "googleDrive_0",
      "targetHandle": "googleDrive_0-input-textSplitter-TextSplitter",
      "type": "buttonedge",
      "id": "markdownTextSplitter_0-markdownTextSplitter_0-output-markdownTextSplitter-MarkdownTextSplitter|RecursiveCharacterTextSplitter|TextSplitter|BaseDocumentTransformer|Runnable-googleDrive_0-googleDrive_0-input-textSplitter-TextSplitter"
    },
    {
      "source": "googleDrive_0",
      "sourceHandle": "googleDrive_0-output-document-Document|json",
      "target": "qdrant_0",
      "targetHandle": "qdrant_0-input-document-Document",
      "type": "buttonedge",
      "id": "googleDrive_0-googleDrive_0-output-document-Document|json-qdrant_0-qdrant_0-input-document-Document"
    },
    {
      "source": "googleGenerativeAiEmbeddings_0",
      "sourceHandle": "googleGenerativeAiEmbeddings_0-output-googleGenerativeAiEmbeddings-GoogleGenerativeAiEmbeddings|GoogleGenerativeAIEmbeddings|Embeddings",
      "target": "qdrant_0",
      "targetHandle": "qdrant_0-input-embeddings-Embeddings",
      "type": "buttonedge",
      "id": "googleGenerativeAiEmbeddings_0-googleGenerativeAiEmbeddings_0-output-googleGenerativeAiEmbeddings-GoogleGenerativeAiEmbeddings|GoogleGenerativeAIEmbeddings|Embeddings-qdrant_0-qdrant_0-input-embeddings-Embeddings"
    }
  ]
}